{% load static %}
<!DOCTYPE html>
<html lang="en">
  <link rel="stylesheet" href="{% static 'graph.css' %}">
  <head>
    <meta charset="UTF-8">
    <meta hhtp-equiv="X-UA-Compatible" content "IE-edge">  
    <meta name="viewport" content="width=<device-width>, initial-scale=1">
      <title>Graph</title>
  </head>
<body>
  {% block content %}
  {% if user.is_authenticated %}
  <header>
    <div class="nav-bar">
      <div class="top-bar">
          <a href="{% url 'dashboard' %}"><img src="/static/logo.png" alt="Logo" height="80" width="80" id="logo"></a>
          <a href="{% url 'dashboard' %}" class="grid-item">Home</a>
          <a href="{% url 'prediction' %}" class="grid-item">Prediction</a>
          <a href="{% url 'graph' %}" class="grid-item">Graphs</a>
          <a href="{% url 'logout' %}" class="grid-item" id="signout">Sign Out</a>
      </div>
    </div>
  </header>
  <main>
    <div class="content">
        <div class="title">
            <h1>Graph of Usage (All)</h1>
        </div>
            <!--Image by Maxim Hopman on unsplash link provided https://unsplash.com/photos/fiXLQXAhCfk -->
              
             <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>-->
             <div>
             <canvas id="chart" width="100" height="100"></canvas>
           </div>
           {% csrf_token %}
           <img src="/static/data.png">
              <script>
              //Loading in the dataset
              //d3.csv('\static\training.csv').then(makeChart);
              //Values
              // Date,Rainfall (mm),Max Temp (°C),Min Temp (°C),Usage(L),Usage(kWh),Avg Temp (°C)
              //Function to make chart
              /*function makeChart(training)
              {
                //Date of recording 
                var dateLabels = training.map(function(d) {
                  //I think the error are here
                  return d.Date;
                });
                //Water usage
                var waterData = training.map(function(d) {
                  //I think the error are here
                  return d.Usage(L);
                });

                var chart = new Chart('chart',{
                  type: 'horizontalBar',
                  data:{
                    labels: dateLabels,
                    datasets: [
                      {
                        data: waterData
                      }
                    ]
                  }
                });
              }

              d3.csv('/static/training.csv').then(makeChart);*/

              /*var batch = d3.csv("static/training.csv", function(csv){
                csv = csv.filter(function(row){
                  return row['Date'] && row['Usage(L)'];
                });
                var Chart = d3.select("body").selectAll("rect").data(csv)
              });*/
              </script>  

              
     

        <h2 id="date">Date</h2>

        <div class="txtbtn">
            <Label for="fromDate">From Date:</Label>
            <input type="text" name="fromDate" id="fromDate">

            <Label for="toDate">To Date:</Label>
            <input type="text" name="toDate" id="toDate">

            <button id="goButton">Go</button>
        </div>


    </div>
  </main>
    <footer>
      <img />
    </footer>
  </body>
  {% else %}
  <p>You are not Logged in!</p>
  <a href="{% url 'login' %}">Log In</a>
  {% endif %}
  {% endblock %}
  </html>
  